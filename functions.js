function M(d,e){var a=d,b=0;if(e&1){for(e+=1,a=new Uint8Array(e),b=a[e-1]=0;b<e-1;b++){a[b]=d[b]&255}}for(var c=0,b=0;b<e;b+=2){c+=a[b]<<8|a[b+1]}for(;c>>16;){c=(c&65535)+(c>>16)}return ~c&65535}function K(d){for(var e=0;e<d.length;++e){var a=d.charCodeAt(e);if(256<a){if(a="&#"+a.toString()+";",2==k){var b=escape(d.substr(e,1));d=escape(d);d=d.replace(b,a);d=unescape(d)}else{d=d.replace(d[e],a)}}}a=d.length+5;e=new Uint8Array(a);e[0]=65;e[1]=1;e[2]=0;e[3]=0;for(var b=e[4]=0,c=d.length;b<c;++b){e[b+5]=d.charCodeAt(b)}d=M(e,a);e[2]=(65280&d)>>8;e[3]=d&255;return e};